"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[751],{5834:function(e,t){function i(e){const{title:t}=e.$options;if(t)return"function"===typeof t?t.call(e):t}t["Z"]={created(){const e=i(this);e&&(document.title=e)}}},5359:function(e,t){t["Z"]={methods:{sleep(e){return new Promise((t=>setTimeout(t,e)))}}}},4688:function(e,t,i){i.r(t),i.d(t,{default:function(){return se}});var s=i(6252),n=i(3577);const o={class:"room"},a={key:0,class:"waiting-card"},r={key:1,class:"game-wrapper"},c={class:"game"},l={class:"end-game"};function h(e,t,i,h,m,d){const u=(0,s.up)("n-h1"),g=(0,s.up)("n-spin"),y=(0,s.up)("n-alert"),p=(0,s.up)("n-button"),f=(0,s.up)("morpion"),k=(0,s.up)("rock-paper-scissors"),C=(0,s.up)("connect-4"),v=(0,s.up)("n-collapse-transition"),w=(0,s.up)("n-result");return(0,s.wg)(),(0,s.iD)("div",o,[m.isReady?((0,s.wg)(),(0,s.iD)("div",r,[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.game),1)])),_:1}),(0,s._)("div",c,[(0,s.Wm)(v,{show:""===e.outcome,appear:""},{default:(0,s.w5)((()=>["Morpion"===e.game?((0,s.wg)(),(0,s.j4)(f,{key:0})):"Pierre-papier-ciseaux"===e.game?((0,s.wg)(),(0,s.j4)(k,{key:1})):"Puissance 4"===e.game?((0,s.wg)(),(0,s.j4)(C,{key:2})):(0,s.kq)("",!0)])),_:1},8,["show"]),(0,s.Wm)(v,{show:""!==e.outcome,appear:""},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s.Wm)(w,{status:d.statusEndGame,title:d.titleEndGame,description:d.descriptionEndGame},{footer:(0,s.w5)((()=>[e.host&&e.outcome?((0,s.wg)(),(0,s.j4)(p,{key:0,onClick:t[1]||(t[1]=e=>d.restartGame())},{default:(0,s.w5)((()=>[(0,s.Uk)(" Rejouer ")])),_:1})):((0,s.wg)(),(0,s.j4)(g,{key:1,size:"medium"}))])),_:1},8,["status","title","description"])])])),_:1},8,["show"])]),(0,s.Wm)(p,{onClick:t[2]||(t[2]=e=>d.quitRoomConfirm(d.quitRoom)),class:"quit-button"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Quitter la partie ")])),_:1})])):((0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.game),1)])),_:1}),(0,s.Wm)(y,{type:"success"},{icon:(0,s.w5)((()=>[(0,s.Wm)(g,{size:"small"})])),default:(0,s.w5)((()=>[(0,s.Uk)(" En attente d'un autre joueur... ")])),_:1}),(0,s.Wm)(p,{onClick:t[0]||(t[0]=e=>d.quitRoom())},{default:(0,s.w5)((()=>[(0,s.Uk)(" Annuler ")])),_:1})]))])}i(7658);var m=i(3907),d=i(5834);const u={cellspacing:"0",cellpadding:"0"},g=["onClick","onMouseover"],y={class:"inner-circle"};function p(e,t,i,o,a,r){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("table",u,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.gridContent,((e,i)=>((0,s.wg)(),(0,s.iD)("tr",{key:i},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,o)=>((0,s.wg)(),(0,s.iD)("td",{key:o,onClick:e=>r.placeItem(i,o),class:(0,n.C_)({col:a.hoverColumn===o}),onMouseover:e=>a.hoverColumn=o,onMouseout:t[0]||(t[0]=e=>a.hoverColumn=-1)},[(0,s._)("div",y,[""!==a.gridContent[i][o]?((0,s.wg)(),(0,s.iD)("span",{key:0,class:(0,n.C_)({"enemy-item":a.gridContent[i][o]===a.enemySymbol,"my-item":a.gridContent[i][o]===a.symbol,"victory-end-game":a.gridContent[i][o]===a.victorySymbol,"defeat-end-game":a.gridContent[i][o]===a.defeatSymbol,"end-game":a.isEnd})},null,2)):(0,s.kq)("",!0)])],42,g)))),128))])))),128))])])])}var f={data(){return{infoMessage:null,loadingMessage:null}},beforeUnmount(){this.removeMessage()},methods:{createInfoMessage(e){this.infoMessage||(this.infoMessage=window.$message.success(e,{duration:0}))},createLoadingMessage(e){this.loadingMessage||(this.loadingMessage=window.$message.loading(e,{duration:0}))},removeMessage(){this.loadingMessage&&(this.loadingMessage.destroy(),this.loadingMessage=null),this.infoMessage&&(this.infoMessage.destroy(),this.infoMessage=null)}}},k=i(5359),C={name:"Connect4",mixins:[f,k.Z],data(){return{gridContent:[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]],symbol:"X",enemySymbol:"O",victorySymbol:"V",defeatSymbol:"D",hoverColumn:-1,isEnd:!1}},computed:{...(0,m.rn)("player",["socketId","turn"]),...(0,m.rn)("game",["enemyData","playedCell","victoryCells"]),...(0,m.Se)("room",["enemies"])},watch:{enemyData(){this.placeEnemyItem()}},mounted(){this.listenPlayToConnect4(),this.turn?this.createInfoMessage("A toi de jouer"):this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},beforeUnmount(){this.changeVictoryCells([]),this.changePlayedCell("")},methods:{...(0,m.nv)("player",["changeTurn","changeOutcome","changeIsWinner"]),...(0,m.nv)("game",["emitPlayToConnect4","listenPlayToConnect4","changePlayedCell","changeVictoryCells"]),placeItem(e,t){if(!this.turn)return;if(""!==this.gridContent[0][t]||""!==this.gridContent[e][t])return;this.removeMessage();const i=this.placeItemInBottomOfColumn(t);this.changePlayedCell([i,t]),this.checkVictory(),this.changeTurn(!1),this.emitPlayToConnect4(),this.isEnd||this.checkEquality()||this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},placeEnemyItem(){if(0===this.enemyData.length)return;if(this.socketId===this.enemyData.socketId)return;if(this.enemyData.turn)return;this.removeMessage();let e=this.enemyData.playedCell;this.gridContent[e[0]][e[1]]=this.enemySymbol,this.checkDefeat()||this.checkEquality()||(this.changeTurn(!0),this.createInfoMessage("A toi de jouer"))},placeItemInBottomOfColumn(e){for(let t=5;t>=0;t--)if(""===this.gridContent[t][e])return this.gridContent[t][e]=this.symbol,t},checkVictory(){0!==this.enemyData.length&&(this.checkVictoryBottom()||this.checkVictoryHorizontal()||this.checkVictoryForward()||this.checkVictoryBack())&&(this.changeIsWinner(!0),this.gameOver("victory"))},checkDefeat(){return!!this.enemyData.isWinner&&(this.gameOver("defeat"),!0)},checkEquality(){const e=this.gridContent.every((e=>!e.includes("")));return!!e&&(this.gameOver("equality"),!0)},checkVictoryBottom(){let e=[],t=this.playedCell[0],i=this.playedCell[1];while(t<6){if(this.gridContent[t][i]!==this.symbol)break;if(e.push([t,i]),4===e.length)return this.changeVictoryCells(e),!0;t++}return!1},checkVictoryHorizontal(){let e=[],t=this.playedCell[0];for(let i=0;i<7;i++)if(this.gridContent[t][i]===this.symbol&&e.push([t,i]),e.length>0&&this.gridContent[t][i]!==this.symbol&&(e=[]),4===e.length)return this.changeVictoryCells(e),!0;return!1},checkVictoryForward(){let e=[],[t,i]=this.findStartCoordonateForward();while(t>=0&&i<=6){if(this.gridContent[t][i]===this.symbol?e.push([t,i]):e=[],4===e.length)return this.changeVictoryCells(e),!0;t--,i++}return!1},checkVictoryBack(){let e=[],[t,i]=this.findStartCoordonateBack();while(t>=0&&i>=0){if(this.gridContent[t][i]===this.symbol?e.push([t,i]):e=[],4===e.length)return this.changeVictoryCells(e),!0;t--,i--}return!1},findStartCoordonateForward(){let e=this.playedCell[0],t=this.playedCell[1];while(e<5&&t>0)e++,t--;return[e,t]},findStartCoordonateBack(){let e=this.playedCell[0],t=this.playedCell[1];while(e<5&&t<6)e++,t++;return[e,t]},async gameOver(e){if("equality"!==e){const t=0===this.victoryCells.length?this.enemyData.victoryCells:this.victoryCells;for(let i=0;i<4;i++)this.gridContent[t[i][0]][t[i][1]]="victory"===e?this.victorySymbol:this.defeatSymbol}this.isEnd=!0,await this.sleep(3e3),this.changeOutcome(e)}}},v=i(3744);const w=(0,v.Z)(C,[["render",p],["__scopeId","data-v-9d17a53e"]]);var D=w;const I={class:"morpion"},_={cellspacing:"0",cellpadding:"0"},b=["onClick"],V={key:0,class:"circle"},R={key:1,class:"cross"};function M(e,t,i,o,a,r){return(0,s.wg)(),(0,s.iD)("div",I,[(0,s._)("table",_,[(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.gridContent,((e,t)=>((0,s.wg)(),(0,s.iD)("tr",{key:t},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e,((e,i)=>((0,s.wg)(),(0,s.iD)("td",{key:i,class:(0,n.C_)([`h-${t} w-${i}`,{[`ht-${t}-${i}`]:a.lineHorizontalTop,[`hc-${t}-${i}`]:a.lineHorizontalCenter,[`hb-${t}-${i}`]:a.lineHorizontalBottom,[`vl-${t}-${i}`]:a.lineVerticalLeft,[`vc-${t}-${i}`]:a.lineVerticalCenter,[`vr-${t}-${i}`]:a.lineVerticalRight,[`db-${t}-${i}`]:a.lineDiagonalBack,[`df-${t}-${i}`]:a.lineDiagonalForward}]),onClick:e=>r.placeItem(t,i)},["O"===a.gridContent[t][i]?((0,s.wg)(),(0,s.iD)("span",V)):(0,s.kq)("",!0),"X"===a.gridContent[t][i]?((0,s.wg)(),(0,s.iD)("span",R)):(0,s.kq)("",!0)],10,b)))),128))])))),128))])])])}var E=i(9963);const O={name:"Morpion",mixins:[f,k.Z],data(){return{gridContent:[["","",""],["","",""],["","",""]],symbol:"X",enemySymbol:"O",endLineColor:"#63e2b7",lineHorizontalTop:!1,lineHorizontalCenter:!1,lineHorizontalBottom:!1,lineVerticalLeft:!1,lineVerticalCenter:!1,lineVerticalRight:!1,lineDiagonalBack:!1,lineDiagonalForward:!1}},computed:{...(0,m.rn)("player",["socketId","host","turn","isWinner"]),...(0,m.rn)("game",["playedCell","enemyData"]),...(0,m.Se)("room",["enemies"])},watch:{enemyData(){this.placeEnemyItem()}},mounted(){this.listenPlayToMorpion(),this.turn?this.createInfoMessage("A toi de jouer"):this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},methods:{...(0,m.nv)("player",["changeTurn","changeIsWinner","changeOutcome"]),...(0,m.nv)("game",["emitPlayToMorpion","listenPlayToMorpion","changePlayedCell","changeVictoryWay"]),placeItem(e,t){this.turn&&""===this.gridContent[e][t]&&(this.removeMessage(),this.gridContent[e][t]=this.symbol,this.changePlayedCell([e,t]),this.checkVictory(),this.changeTurn(!1),this.emitPlayToMorpion(),this.isWinner||this.checkEquality()||this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`))},placeEnemyItem(){if(0===this.enemyData.length)return;if(this.socketId===this.enemyData.socketId)return;if(this.enemyData.turn)return;this.removeMessage();let e=this.enemyData.playedCell;this.gridContent[e[0]][e[1]]=this.enemySymbol,this.checkDefeat()||this.checkEquality()||(this.changeTurn(!0),this.createInfoMessage("A toi de jouer"))},checkEquality(){for(const e of this.gridContent)for(const t of e)if(""===t)return!1;return this.gameOver("equality"),!0},checkDefeat(){return!!this.enemyData.isWinner&&(this.endLineColor="#e88080",this.addLine(this.enemyData.victoryWay),this.gameOver("defeat"),!0)},checkVictory(){0!==this.enemyData.length&&(this.checkVictoryHorizontal()||this.checkVictoryVertical()||this.checkVictoryDiagonalBack()||this.checkVictoryDiagonalForward())&&(this.changeIsWinner(!0),this.gameOver("victory"))},checkVictoryHorizontal(){let e=this.playedCell[0];for(let t=0;t<3;t++)if(this.gridContent[e][t]!==this.symbol)return!1;return 0===e&&this.addLine("h-t"),1===e&&this.addLine("h-c"),2===e&&this.addLine("h-b"),!0},checkVictoryVertical(){let e=this.playedCell[1];for(let t=0;t<3;t++)if(this.gridContent[t][e]!==this.symbol)return!1;return 0===e&&this.addLine("v-l"),1===e&&this.addLine("v-c"),2===e&&this.addLine("v-r"),!0},checkVictoryDiagonalBack(){for(let e=0;e<3;e++)if(this.gridContent[e][e]!==this.symbol)return!1;return this.addLine("d-b"),!0},checkVictoryDiagonalForward(){for(let e=0;e<3;e++){let t=2-e;if(this.gridContent[e][t]!==this.symbol)return!1}return this.addLine("d-f"),!0},async gameOver(e){"equality"!==e?await this.sleep(2e3):await this.sleep(1e3),this.endLineColor="#63e2b7",this.changeOutcome(e)},addLine(e){"h-t"===e&&(this.lineHorizontalTop=!this.lineHorizontalTop),"h-c"===e&&(this.lineHorizontalCenter=!this.lineHorizontalCenter),"h-b"===e&&(this.lineHorizontalBottom=!this.lineHorizontalBottom),"v-l"===e&&(this.lineVerticalLeft=!this.lineVerticalLeft),"v-c"===e&&(this.lineVerticalCenter=!this.lineVerticalCenter),"v-r"===e&&(this.lineVerticalRight=!this.lineVerticalRight),"d-b"===e&&(this.lineDiagonalBack=!this.lineDiagonalBack),"d-f"===e&&(this.lineDiagonalForward=!this.lineDiagonalForward),this.changeVictoryWay(e)}}},$=()=>{(0,E.sj)((e=>({"927a5ba4":e.endLineColor})))},q=O.setup;O.setup=q?(e,t)=>($(),q(e,t)):$;var L=O;const P=(0,v.Z)(L,[["render",M],["__scopeId","data-v-06acffea"]]);var T=P,W=i.p+"img/rock.ca4c5aec.svg",S=i.p+"img/paper.acd767a4.svg",z=i.p+"img/scissors.47c9558f.svg",B=i.p+"img/rock-reverse.5b346b6b.svg",H=i.p+"img/paper-reverse.8ae0df57.svg",F=i.p+"img/scissors-reverse.4f13ce19.svg";const U={class:"choices"},x={class:"choice"},j={class:"choice"},G={class:"choice"},Z={class:"endgame"},A={src:B,alt:"La pierre ennemie",rel:"preload"},K={src:H,alt:"Le papier ennemie",rel:"preload"},Y={src:F,alt:"Les ciseaux ennemies",rel:"preload"},X={class:"scores"};function Q(e,t,i,o,a,r){const c=(0,s.up)("n-collapse-transition"),l=(0,s.up)("n-text");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{show:a.displayChoices},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("div",x,[(0,s._)("img",{src:W,alt:"La pierre",title:"La pierre",onClick:t[0]||(t[0]=e=>r.chooseItem("rock")),class:(0,n.C_)({chosen:"rock"===e.chosenItem,"disabled-item":""!==e.chosenItem}),rel:"preload"},null,2)]),(0,s._)("div",j,[(0,s._)("img",{src:S,alt:"Le papier",title:"Le Papier",onClick:t[1]||(t[1]=e=>r.chooseItem("paper")),class:(0,n.C_)({chosen:"paper"===e.chosenItem,"disabled-item":""!==e.chosenItem}),rel:"preload"},null,2)]),(0,s._)("div",G,[(0,s._)("img",{src:z,alt:"Les ciseaux",title:"Les ciseaux",onClick:t[2]||(t[2]=e=>r.chooseItem("scissors")),class:(0,n.C_)({chosen:"scissors"===e.chosenItem,"disabled-item":""!==e.chosenItem}),rel:"preload"},null,2)])])])),_:1},8,["show"]),(0,s.Wm)(c,{show:a.displayEndgame},{default:(0,s.w5)((()=>[(0,s._)("div",Z,[(0,s._)("div",null,[(0,s.wy)((0,s._)("img",{src:W,alt:"Ma pierre",class:(0,n.C_)(a.localOutcome),rel:"preload"},null,2),[[E.F8,"rock"===e.chosenItem]]),(0,s.wy)((0,s._)("img",{src:S,alt:"Mon papier",class:(0,n.C_)(a.localOutcome),rel:"preload"},null,2),[[E.F8,"paper"===e.chosenItem]]),(0,s.wy)((0,s._)("img",{src:z,alt:"Mes ciseaux",class:(0,n.C_)(a.localOutcome),rel:"preload"},null,2),[[E.F8,"scissors"===e.chosenItem]])]),(0,s.Wm)(l,{italic:""},{default:(0,s.w5)((()=>[(0,s.Uk)("VS")])),_:1}),(0,s._)("div",{class:(0,n.C_)({"endgame-enemy-choices":2===e.enemyData.length})},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.enemyData,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.socketId},[(0,s.wy)((0,s._)("img",A,null,512),[[E.F8,"rock"===e.chosenItem]]),(0,s.wy)((0,s._)("img",K,null,512),[[E.F8,"paper"===e.chosenItem]]),(0,s.wy)((0,s._)("img",Y,null,512),[[E.F8,"scissors"===e.chosenItem]])])))),128))],2)])])),_:1},8,["show"]),(0,s._)("div",X,[(0,s._)("div",null,[(0,s.Wm)(l,{underline:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.username),1)])),_:1}),(0,s.Wm)(l,{depth:"3"},{default:(0,s.w5)((()=>[(0,s.Uk)(" - ")])),_:1}),(0,s.Wm)(l,{type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.score),1)])),_:1})]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.enemies,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{key:t.socketId},[(0,s.Wm)(l,{italic:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(t.username),1)])),_:2},1024),(0,s.Wm)(l,{depth:"3"},{default:(0,s.w5)((()=>[(0,s.Uk)(" - ")])),_:1}),(0,s.Wm)(l,{type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.enemyData.length>0&&void 0!==e.enemyData[i]?e.enemyData[i].score:0),1)])),_:2},1024)])))),128))])])}var J={name:"RockPaperScissors",mixins:[f,k.Z],data(){return{displayChoices:!0,displayEndgame:!1,localOutcome:""}},computed:{...(0,m.rn)("player",["username","score"]),...(0,m.rn)("game",["enemyData","chosenItem","scoreToReach"]),...(0,m.Se)("room",["room","enemies"]),enemyEndgameColorClass(){return"victory"===this.localOutcome?"defeat":"defeat"===this.localOutcome?"victory":"equality"}},watch:{enemyData(e){if(0!==e.length){if(""===this.chosenItem){const t=e.filter((e=>""!==e.chosenItem));this.removeMessage(),1===t.length?this.createInfoMessage(`${t[0].username} a choisi son coup`):2===t.length&&this.createInfoMessage(`${t[0].username} et ${t[1].username} ont choisis leurs coups`)}this.checkResult()}}},mounted(){this.listenPlayToRockPaperScissors()},beforeUnmount(){this.resetEnemyData(),this.changeChosenItem(""),this.changeScore(0)},methods:{...(0,m.nv)("player",["changeOutcome","changeScore"]),...(0,m.nv)("game",["emitPlayToRockPaperScissors","listenPlayToRockPaperScissors","changeEnemyData","resetEnemyData","changeChosenItem"]),chooseItem(e){""===this.chosenItem&&(this.removeMessage(),this.changeChosenItem(e),this.emitPlayToRockPaperScissors(),this.checkResult())},checkResult(){if(this.enemyData.length<this.room.numberOfPlayer-1||""===this.chosenItem)return;const e=this.enemyData.filter((e=>""!==e.chosenItem));if(e.length!==this.enemyData.length)return;let t=0,i=[],s=[];for(let n=0;n<this.enemyData.length;n++){const e=this.enemyData[n].chosenItem;this.checkVictory(e)&&t++,this.checkDefeat(e)&&(i.push(this.enemyData[n]),t--),this.checkEquality(e)&&s.push(this.enemyData[n])}if(t>0){let e=this.enemyData;s.forEach((t=>{const i=e.findIndex((e=>e.socketId===t.socketId));e[i].score=t.score+1})),this.changeEnemyData(e),this.changeScore(this.score+1)}if(t<0){let e=this.enemyData;i.forEach((t=>{const i=e.findIndex((e=>e.socketId===t.socketId));e[i].score=t.score+1})),this.changeEnemyData(e)}t>0?this.roundOver("victory"):t<0?this.roundOver("defeat"):0===t&&this.roundOver("equality")},checkEquality(e){return"rock"===e&&"rock"===this.chosenItem||"paper"===e&&"paper"===this.chosenItem||"scissors"===e&&"scissors"===this.chosenItem},checkVictory(e){return"rock"===e&&"paper"===this.chosenItem||"paper"===e&&"scissors"===this.chosenItem||"scissors"===e&&"rock"===this.chosenItem},checkDefeat(e){return"rock"===e&&"scissors"===this.chosenItem||"paper"===e&&"rock"===this.chosenItem||"scissors"===e&&"paper"===this.chosenItem},async roundOver(e){this.localOutcome=e,this.displayChoices=!1,this.displayEndgame=!0,await this.sleep(1e3*this.room.numberOfPlayer+500),this.resetChosenItemForEnemyData(),this.changeChosenItem(""),this.score===this.room.scoreToReach?this.gameOver("victory"):this.enemyData.find((e=>e.score===this.room.scoreToReach))?this.gameOver("defeat"):(this.displayEndgame=!1,this.displayChoices=!0)},resetChosenItemForEnemyData(){let e=this.enemyData;for(let t=0;t<e.length;t++)e[t].chosenItem="";this.changeEnemyData(e)},gameOver(e){this.displayChoices=!1,this.changeOutcome(e)}}};const N=(0,v.Z)(J,[["render",Q],["__scopeId","data-v-1dfca012"]]);var ee=N,te={name:"Room",title:"Room | Playground",mixins:[d.Z],components:{Connect4:D,Morpion:T,RockPaperScissors:ee},data(){return{isReady:!1,toBack:!1,enemyUsername:""}},computed:{...(0,m.rn)("player",["host","outcome"]),...(0,m.rn)("room",["rooms","replay"]),...(0,m.rn)("game",["game"]),...(0,m.Se)("room",["room","enemies"]),statusEndGame(){return"defeat"===this.outcome?"500":"victory"===this.outcome?"418":"404"},titleEndGame(){return"defeat"===this.outcome?"Défaite":"victory"===this.outcome?"Victoire":"Egalité"},descriptionEndGame(){return"defeat"===this.outcome?"Aïe ! Pourquoi ne pas retenter votre chance ?":"victory"===this.outcome?"Trop facile ! Vous prendrez bien un thé ?":"Bizarre... J'était pourtant sûr que vous alliez l'avoir !"}},watch:{rooms(e,t){const i=e.find((e=>e.id===this.$route.query.id));e.length!==t.length&&void 0===i&&this.isReady&&(window.$message.error(`${this.enemyUsername} a quitté la partie`),this.quitRoom()),this.watchRoomForReady()},replay(e,t){!e||t||this.host||this.resetGame()},enemies(e){void 0!==e&&0!==e.length&&""===this.enemyUsername&&(this.enemyUsername=e[0].username)}},created(){this.host&&this.changeRoomId(this.$route.query.id)},mounted(){this.listenReplay(),this.watchRoomForReady(),window.onpopstate=()=>{this.toBack=!0}},beforeRouteLeave(e,t,i){setTimeout((()=>{if(!this.toBack)return i();this.quitRoomConfirm(i)}),100)},methods:{...(0,m.nv)("room",["emitReplay","listenReplay","changeReplay"]),...(0,m.nv)("player",["changeRoomId","changeTurn","changeIsWinner","changeOutcome"]),watchRoomForReady(){void 0===this.room||this.room.players.length!==this.room.numberOfPlayer||this.isReady||(this.isReady=!0)},restartGame(){this.emitReplay(),this.resetGame()},resetGame(){let e="defeat"===this.outcome||"equality"===this.outcome&&this.host;this.changeTurn(e),this.changeOutcome(""),this.changeIsWinner(!1),this.changeReplay(!1)},quitRoomConfirm(e){window.$dialog.warning({title:"Quitter la partie ?",content:"Vous êtes certain de vouloir quitter ? Dans ce cas, votre adversaire sera expulsé de la partie...",positiveText:"Oui, je suis sûr",negativeText:"Finalement non",onPositiveClick:()=>{e()}})},quitRoom(){this.toBack=!1,this.changeReplay(!1),this.$router.push({name:"Home"})}}};const ie=(0,v.Z)(te,[["render",h],["__scopeId","data-v-56240af9"]]);var se=ie}}]);
//# sourceMappingURL=751.85017d73.js.map