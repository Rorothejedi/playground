(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[758],{5834:function(e,t){"use strict";function s(e){const{title:t}=e.$options;if(t)return"function"===typeof t?t.call(e):t}t["Z"]={created(){const e=s(this);e&&(document.title=e)}}},9626:function(e,t,s){"use strict";s.d(t,{Z:function(){return m}});var n=s(6252);const i={class:"username"};function o(e,t,s,o,a,r){const c=(0,n.up)("n-h1"),h=(0,n.up)("n-input"),l=(0,n.up)("n-button"),m=(0,n.up)("n-input-group"),u=(0,n.up)("n-card");return(0,n.wg)(),(0,n.iD)("div",i,[""===e.username?((0,n.wg)(),(0,n.j4)(c,{key:0,class:"username-title"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Playground ")])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(u,{title:"Ton pseudo",class:"username-card",bordered:!1},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{value:a.localUsername,"onUpdate:value":t[0]||(t[0]=e=>a.localUsername=e),ref:"usernameInput",type:"text",size:"large",placeholder:`ex: ${a.usernamePlaceholder}`,maxlength:"30","show-count":""},null,8,["value","placeholder"]),(0,n.Wm)(l,{onClick:t[1]||(t[1]=e=>r.addUsername()),disabled:""===a.localUsername,size:"large"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Choisir ")])),_:1},8,["disabled"])])),_:1})])),_:1})])}var a=s(3907),r=s(5359),c={name:"HomeUsernameInput",mixins:[r.Z],data(){return{localUsername:"",usernamePlaceholder:""}},computed:{...(0,a.rn)("player",["username"])},async mounted(){await this.sleep(100),this.randomUsernamePlaceholder(),this.$refs.usernameInput.focus()},methods:{...(0,a.nv)("player",["changeUsername"]),addUsername(){this.changeUsername(this.localUsername)},randomUsernamePlaceholder(){const e=["Katniss Everdeen","Beatrix Kiddo","Sarah Connor","Ellen Ripley","Mercredi Addams","Imperator Furiosa","Leia Organa","Lara Croft","Barbara Gordon","O-Ren Ishii","Hermione Granger","Claire Bennet","Lisa Simpson","Sansa Stark","Elena Fisher","Tifa Lockhart","John McClane","Korben Dallas","Commandant Shepard","Sheldon Cooper","Vincent Vega","John Rambo","Ramsay Bolton","James Crochet","Ronon Dex","Charles Xavier","Mia Wallace","Mr Blonde","Aldo Raine","Kyle Broflovski","Barney Stinson","Johnny Rico","Thomas Anderson","Dr. Emmett Brown","James Bond","Luke Skywalker","Inigo Montoya","Tony Montana","Vito Corleone","Rick Deckard","Maximus Decimus Meridius","Trinity","Neo","Harley Quinn","Dr. Samantha Carter","Jack O'Neill","Dr. Daniel Jackson","Rodney McKay","Vala Mal Doran","Garrus Vakarian","Miranda Lawson","Tali'Zorah vas Normandy","Sauron","Samsagace Gamegie","Peregrin Touque","Tom Bombadil","Meriadoc Brandebouc","Finrod Felagund","Wilhuff Tarkin","Mon Mothma","Mara Jade","Kyle Katarn","Daenerys Targaryen","Samus Aran"],t=Math.floor(Math.random()*e.length);this.usernamePlaceholder=e[t]}}},h=s(3744);const l=(0,h.Z)(c,[["render",o],["__scopeId","data-v-e5258e0c"]]);var m=l},2758:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return me}});var n=s(6252),i=s(3577),o=s(9963);const a={key:1},r={key:0,class:"waiting-card"},c={class:"waiting-card-content"},h={key:1,class:"game-wrapper"},l={class:"game"};function m(e,t,s,m,u,d){const g=(0,n.up)("scorebar"),y=(0,n.up)("n-collapse-transition"),p=(0,n.up)("home-username-input"),f=(0,n.up)("n-h5"),v=(0,n.up)("n-spin"),C=(0,n.up)("n-alert"),k=(0,n.up)("morpion"),w=(0,n.up)("connect-4"),D=(0,n.up)("rock-paper-scissors"),I=(0,n.up)("endgame");return(0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["room",{"room-without-nav":""===e.username}])},[(0,n.Wm)(y,{class:"scorebar-wrapper",show:d.isDisplayScorebar&&""===e.outcome&&u.isReady&&"Pierre-papier-ciseaux"===e.game},{default:(0,n.w5)((()=>[(0,n.Wm)(g)])),_:1},8,["show"]),(0,n.Wm)(o.uT,{appear:"",name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[""===e.username?((0,n.wg)(),(0,n.j4)(p,{key:0})):((0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(o.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[u.isReady?((0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",l,[(0,n.Wm)(o.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[""===e.outcome&&"Morpion"===e.game?((0,n.wg)(),(0,n.j4)(k,{key:0})):""===e.outcome&&"Puissance 4"===e.game?((0,n.wg)(),(0,n.j4)(w,{key:1})):""===e.outcome&&"Pierre-papier-ciseaux"===e.game?((0,n.wg)(),(0,n.j4)(D,{key:2})):""!==e.outcome?((0,n.wg)(),(0,n.j4)(I,{key:3})):(0,n.kq)("",!0)])),_:1})])])):((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(C,{type:"success",bordered:!1,"show-icon":!1},{default:(0,n.w5)((()=>[(0,n._)("div",c,[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" En attente d'un autre joueur... ")])),_:1}),(0,n.Wm)(v,{size:"small"})])])),_:1})]))])),_:1})]))])),_:1})],2)}s(7658);var u=s(3907),d=s(5834);function g(e,t,s,i,o,a){const r=(0,n.up)("trophy-24-regular"),c=(0,n.up)("n-icon"),h=(0,n.up)("n-statistic"),l=(0,n.up)("n-gi"),m=(0,n.up)("n-grid"),u=(0,n.up)("n-progress");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(m,{cols:e.numberOfPlayer,class:"scorebar"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:"score-column"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{label:e.username,value:e.score},(0,n.Nv)({_:2},[1===a.scorePosition&&0!==e.score?{name:"prefix",fn:(0,n.w5)((()=>[(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r)])),_:1})])),key:"0"}:void 0]),1032,["label","value"])])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.enemies,((e,t)=>((0,n.wg)(),(0,n.j4)(l,{key:t,class:"score-column"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{label:e.username,value:a.getEnemyScore(e)},null,8,["label","value"])])),_:2},1024)))),128))])),_:1},8,["cols"]),(0,n.Wm)(u,{"show-indicator":!1,status:a.progressStatus,percentage:a.scoreMax/e.scoreToReach*100,"border-radius":0,height:4},null,8,["status","percentage"])])}const y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},p=(0,n._)("g",{fill:"none"},[(0,n._)("path",{d:"M15.254 2a2.25 2.25 0 0 1 2.236 2h1.268a1.75 1.75 0 0 1 1.744 1.606l.006.144v3a3.25 3.25 0 0 1-3.066 3.245l-.21.006a5.758 5.758 0 0 1-4.731 3.95V17.5h1.753a3.25 3.25 0 0 1 3.244 3.066l.006.184v.5a.75.75 0 0 1-.649.743l-.101.007H6.75a.75.75 0 0 1-.744-.648l-.006-.102v-.5a3.25 3.25 0 0 1 3.065-3.245l.185-.005H11v-1.549a5.758 5.758 0 0 1-4.729-3.95L6.246 12a3.25 3.25 0 0 1-3.25-3.25v-3c0-.966.784-1.75 1.75-1.75h1.268a2.25 2.25 0 0 1 2.237-2h7.003zm-1 17H9.25a1.75 1.75 0 0 0-1.705 1.352l-.028.148h8.468a1.75 1.75 0 0 0-1.579-1.493L14.255 19zm1-15.5H8.25a.75.75 0 0 0-.75.75v5.998a4.252 4.252 0 0 0 8.503 0V4.25a.75.75 0 0 0-.75-.75zm3.504 2h-1.254v4.983A1.75 1.75 0 0 0 19 8.904l.007-.154v-3a.25.25 0 0 0-.193-.243l-.057-.007zM6 5.5H4.746a.25.25 0 0 0-.25.25v3a1.75 1.75 0 0 0 1.505 1.733V5.5z",fill:"currentColor"})],-1),f=[p];var v=(0,n.aZ)({name:"Trophy24Regular",render:function(e,t){return(0,n.wg)(),(0,n.iD)("svg",y,f)}}),C=s(5359),k={name:"Scorebar",mixins:[C.Z],components:{Trophy24Regular:v},data(){return{}},computed:{...(0,u.rn)("game",["enemyData","game","numberOfPlayer","scoreToReach"]),...(0,u.rn)("player",["username","score","outcome"]),...(0,u.Se)("room",["enemies"]),scorePosition(){let e=[];this.enemyData.forEach((t=>{e.push(t.score)}));const t=Math.max(...e);return t>this.score?-1:t<this.score?1:0},scoreMax(){let e=[];return e.push(this.score),this.enemyData.forEach((t=>{e.push(t.score)})),Math.max(...e)},progressStatus(){return-1===this.scorePosition?"error":0===this.scorePosition?"warning":"success"}},methods:{...(0,u.nv)("player",["changeScore"]),getEnemyScore(e){const t=this.enemyData.find((t=>t.socketId===e.socketId));return void 0===t?0:t.score}}},w=s(3744);const D=(0,w.Z)(k,[["render",g],["__scopeId","data-v-30eb5525"]]);var I=D,b=s(9626);const E={class:"end-game"};function P(e,t,s,i,o,a){const r=(0,n.up)("n-button"),c=(0,n.up)("n-spin"),h=(0,n.up)("n-result");return(0,n.wg)(),(0,n.iD)("div",E,[(0,n.Wm)(h,{status:a.statusEndGame,title:a.titleEndGame,description:a.descriptionEndGame},{footer:(0,n.w5)((()=>[e.host&&e.outcome?((0,n.wg)(),(0,n.j4)(r,{key:0,onClick:t[0]||(t[0]=e=>a.restartGame())},{default:(0,n.w5)((()=>[(0,n.Uk)(" Rejouer ")])),_:1})):((0,n.wg)(),(0,n.j4)(c,{key:1,size:"medium"}))])),_:1},8,["status","title","description"])])}var R={name:"Endgame",watch:{replay(e,t){!e||t||this.host||this.resetGame()}},computed:{...(0,u.rn)("player",["host","outcome"]),...(0,u.rn)("room",["replay"]),statusEndGame(){return"defeat"===this.outcome?"500":"victory"===this.outcome?"418":"404"},titleEndGame(){return"defeat"===this.outcome?"Défaite":"victory"===this.outcome?"Victoire":"Egalité"},descriptionEndGame(){return"defeat"===this.outcome?"Aïe ! Pourquoi ne pas retenter votre chance ?":"victory"===this.outcome?"Trop facile ! Vous prendrez bien un thé ?":"Bizarre... J'était pourtant sûr que vous alliez l'avoir !"}},methods:{...(0,u.nv)("player",["changeTurn","changeIsWinner","changeOutcome"]),...(0,u.nv)("room",["emitReplay","changeReplay"]),restartGame(){this.emitReplay(),this.resetGame()},resetGame(){const e="defeat"===this.outcome||"equality"===this.outcome&&this.host;this.changeTurn(e),this.changeOutcome(""),this.changeIsWinner(!1),this.changeReplay(!1)}}};const M=(0,w.Z)(R,[["render",P],["__scopeId","data-v-dc24f1c4"]]);var T=M;const O={cellspacing:"0",cellpadding:"0"},S=["onClick","onMouseover"],V={class:"inner-circle"};function _(e,t,s,o,a,r){return(0,n.wg)(),(0,n.iD)("table",O,[(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.gridContent,((e,s)=>((0,n.wg)(),(0,n.iD)("tr",{key:s},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,((e,o)=>((0,n.wg)(),(0,n.iD)("td",{key:o,onClick:e=>r.placeItem(s,o),class:(0,i.C_)({col:a.hoverColumn===o}),onMouseover:e=>a.hoverColumn=o,onMouseout:t[0]||(t[0]=e=>a.hoverColumn=-1)},[(0,n._)("div",V,[""!==a.gridContent[s][o]?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,i.C_)({"enemy-item":a.gridContent[s][o]===a.enemySymbol,"my-item":a.gridContent[s][o]===a.symbol,"victory-end-game":a.gridContent[s][o]===a.victorySymbol,"defeat-end-game":a.gridContent[s][o]===a.defeatSymbol,"end-game":a.isEnd})},null,2)):(0,n.kq)("",!0)])],42,S)))),128))])))),128))])])}var L={data(){return{infoMessage:null,loadingMessage:null}},beforeUnmount(){this.removeMessage()},methods:{createInfoMessage(e){this.infoMessage||(this.infoMessage=window.$message.success(e,{duration:0}))},createLoadingMessage(e){this.loadingMessage||(this.loadingMessage=window.$message.loading(e,{duration:0}))},removeMessage(){this.loadingMessage&&(this.loadingMessage.destroy(),this.loadingMessage=null),this.infoMessage&&(this.infoMessage.destroy(),this.infoMessage=null)}}};const x={name:"Connect4",mixins:[L,C.Z],data(){return{gridContent:[["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""],["","","","","","",""]],symbol:"X",enemySymbol:"O",victorySymbol:"V",defeatSymbol:"D",hoverColumn:-1,isEnd:!1}},computed:{...(0,u.rn)("player",["socketId","turn"]),...(0,u.rn)("game",["enemyData","playedCell"]),...(0,u.rn)("connect4",["victoryCells","colorPlayer","colorEnemy"]),...(0,u.Se)("room",["enemies"]),darkenColorPlayer(){return this.hexTorgba(this.colorPlayer,.5)},darkenColorEnemy(){return this.hexTorgba(this.colorEnemy,.5)}},watch:{enemyData(){this.placeEnemyItem()}},mounted(){this.listenPlayToConnect4(),this.turn?this.createInfoMessage("A toi de jouer"):this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},beforeUnmount(){this.changeVictoryCells([]),this.changePlayedCell("")},methods:{...(0,u.nv)("player",["changeTurn","changeOutcome","changeIsWinner"]),...(0,u.nv)("game",["changePlayedCell"]),...(0,u.nv)("connect4",["emitPlayToConnect4","listenPlayToConnect4","changeVictoryCells"]),placeItem(e,t){if(!this.turn)return;if(""!==this.gridContent[0][t]||""!==this.gridContent[e][t])return;this.removeMessage();const s=this.placeItemInBottomOfColumn(t);this.changePlayedCell([s,t]),this.checkVictory(),this.changeTurn(!1),this.emitPlayToConnect4(),this.isEnd||this.checkEquality()||this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},placeEnemyItem(){if(0===this.enemyData.length)return;if(this.socketId===this.enemyData.socketId)return;if(this.enemyData.turn)return;this.removeMessage();let e=this.enemyData.playedCell;this.gridContent[e[0]][e[1]]=this.enemySymbol,this.checkDefeat()||this.checkEquality()||(this.changeTurn(!0),this.createInfoMessage("A toi de jouer"))},placeItemInBottomOfColumn(e){for(let t=5;t>=0;t--)if(""===this.gridContent[t][e])return this.gridContent[t][e]=this.symbol,t},checkVictory(){0!==this.enemyData.length&&(this.checkVictoryBottom()||this.checkVictoryHorizontal()||this.checkVictoryForward()||this.checkVictoryBack())&&(this.changeIsWinner(!0),this.gameOver("victory"))},checkDefeat(){return!!this.enemyData.isWinner&&(this.gameOver("defeat"),!0)},checkEquality(){const e=this.gridContent.every((e=>!e.includes("")));return!!e&&(this.gameOver("equality"),!0)},checkVictoryBottom(){let e=[],t=this.playedCell[0],s=this.playedCell[1];while(t<6){if(this.gridContent[t][s]!==this.symbol)break;if(e.push([t,s]),4===e.length)return this.changeVictoryCells(e),!0;t++}return!1},checkVictoryHorizontal(){let e=[],t=this.playedCell[0];for(let s=0;s<7;s++)if(this.gridContent[t][s]===this.symbol&&e.push([t,s]),e.length>0&&this.gridContent[t][s]!==this.symbol&&(e=[]),4===e.length)return this.changeVictoryCells(e),!0;return!1},checkVictoryForward(){let e=[],[t,s]=this.findStartCoordonateForward();while(t>=0&&s<=6){if(this.gridContent[t][s]===this.symbol?e.push([t,s]):e=[],4===e.length)return this.changeVictoryCells(e),!0;t--,s++}return!1},checkVictoryBack(){let e=[],[t,s]=this.findStartCoordonateBack();while(t>=0&&s>=0){if(this.gridContent[t][s]===this.symbol?e.push([t,s]):e=[],4===e.length)return this.changeVictoryCells(e),!0;t--,s--}return!1},findStartCoordonateForward(){let e=this.playedCell[0],t=this.playedCell[1];while(e<5&&t>0)e++,t--;return[e,t]},findStartCoordonateBack(){let e=this.playedCell[0],t=this.playedCell[1];while(e<5&&t<6)e++,t++;return[e,t]},async gameOver(e){if("equality"!==e){const t=0===this.victoryCells.length?this.enemyData.victoryCells:this.victoryCells;for(let s=0;s<4;s++)this.gridContent[t[s][0]][t[s][1]]="victory"===e?this.victorySymbol:this.defeatSymbol}this.isEnd=!0,await this.sleep(3e3),this.changeOutcome(e)}}},W=()=>{(0,o.sj)((e=>({"7998e2cc":e.colorEnemy,"34b86a4e":e.darkenColorEnemy,"943483e2":e.colorPlayer,"3d05eca0":e.darkenColorPlayer})))},$=x.setup;x.setup=$?(e,t)=>(W(),$(e,t)):W;var H=x;const z=(0,w.Z)(H,[["render",_],["__scopeId","data-v-5821fded"]]);var q=z;const B={class:"morpion"},U={cellspacing:"0",cellpadding:"0"},F=["onClick"],j={key:0,class:"circle"},G={key:1,class:"cross"};function Z(e,t,s,o,a,r){return(0,n.wg)(),(0,n.iD)("div",B,[(0,n._)("table",U,[(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.gridContent,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e,((e,s)=>((0,n.wg)(),(0,n.iD)("td",{key:s,class:(0,i.C_)([`h-${t} w-${s}`,{[`ht-${t}-${s}`]:a.lineHorizontalTop,[`hc-${t}-${s}`]:a.lineHorizontalCenter,[`hb-${t}-${s}`]:a.lineHorizontalBottom,[`vl-${t}-${s}`]:a.lineVerticalLeft,[`vc-${t}-${s}`]:a.lineVerticalCenter,[`vr-${t}-${s}`]:a.lineVerticalRight,[`db-${t}-${s}`]:a.lineDiagonalBack,[`df-${t}-${s}`]:a.lineDiagonalForward}]),onClick:e=>r.placeItem(t,s)},["O"===a.gridContent[t][s]?((0,n.wg)(),(0,n.iD)("span",j)):(0,n.kq)("",!0),"X"===a.gridContent[t][s]?((0,n.wg)(),(0,n.iD)("span",G)):(0,n.kq)("",!0)],10,F)))),128))])))),128))])])])}const K={name:"Morpion",mixins:[L,C.Z],data(){return{gridContent:[["","",""],["","",""],["","",""]],endLineColor:"",lineHorizontalTop:!1,lineHorizontalCenter:!1,lineHorizontalBottom:!1,lineVerticalLeft:!1,lineVerticalCenter:!1,lineVerticalRight:!1,lineDiagonalBack:!1,lineDiagonalForward:!1}},computed:{...(0,u.rn)("player",["socketId","host","turn","isWinner"]),...(0,u.rn)("game",["playedCell","enemyData"]),...(0,u.rn)("morpion",["colorPlayer","colorEnemy","shapePlayer","shapeEnemy"]),...(0,u.Se)("room",["enemies"]),colorCross(){return"X"===this.shapePlayer?this.colorPlayer:this.colorEnemy},colorCircle(){return"O"===this.shapePlayer?this.colorPlayer:this.colorEnemy}},watch:{enemyData(){this.placeEnemyItem()},shapePlayer(){this.switchShapesInGridContent()}},mounted(){this.listenPlayToMorpion(),this.turn?this.createInfoMessage("A toi de jouer"):this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`)},methods:{...(0,u.nv)("player",["changeTurn","changeIsWinner","changeOutcome"]),...(0,u.nv)("game",["changePlayedCell"]),...(0,u.nv)("morpion",["emitPlayToMorpion","listenPlayToMorpion","changeVictoryWay"]),placeItem(e,t){this.turn&&""===this.gridContent[e][t]&&(this.removeMessage(),this.gridContent[e][t]=this.shapePlayer,this.changePlayedCell([e,t]),this.checkVictory(),this.changeTurn(!1),this.emitPlayToMorpion(),this.isWinner||this.checkEquality()||this.createLoadingMessage(`${this.enemies[0].username} prépare son coup`))},placeEnemyItem(){if(0===this.enemyData.length)return;if(this.socketId===this.enemyData.socketId)return;if(this.enemyData.turn)return;this.removeMessage();let e=this.enemyData.playedCell;this.gridContent[e[0]][e[1]]=this.shapeEnemy,this.checkDefeat()||this.checkEquality()||(this.changeTurn(!0),this.createInfoMessage("A toi de jouer"))},checkEquality(){for(const e of this.gridContent)for(const t of e)if(""===t)return!1;return this.gameOver("equality"),!0},checkDefeat(){return!!this.enemyData.isWinner&&(this.endLineColor=this.colorEnemy,this.addLine(this.enemyData.victoryWay),this.gameOver("defeat"),!0)},checkVictory(){0!==this.enemyData.length&&(this.endLineColor=this.colorPlayer,(this.checkVictoryHorizontal()||this.checkVictoryVertical()||this.checkVictoryDiagonalBack()||this.checkVictoryDiagonalForward())&&(this.changeIsWinner(!0),this.gameOver("victory")))},checkVictoryHorizontal(){let e=this.playedCell[0];for(let t=0;t<3;t++)if(this.gridContent[e][t]!==this.shapePlayer)return!1;return 0===e&&this.addLine("h-t"),1===e&&this.addLine("h-c"),2===e&&this.addLine("h-b"),!0},checkVictoryVertical(){let e=this.playedCell[1];for(let t=0;t<3;t++)if(this.gridContent[t][e]!==this.shapePlayer)return!1;return 0===e&&this.addLine("v-l"),1===e&&this.addLine("v-c"),2===e&&this.addLine("v-r"),!0},checkVictoryDiagonalBack(){for(let e=0;e<3;e++)if(this.gridContent[e][e]!==this.shapePlayer)return!1;return this.addLine("d-b"),!0},checkVictoryDiagonalForward(){for(let e=0;e<3;e++){let t=2-e;if(this.gridContent[e][t]!==this.shapePlayer)return!1}return this.addLine("d-f"),!0},async gameOver(e){"equality"!==e?await this.sleep(2e3):await this.sleep(1e3),this.endLineColor=this.colorPlayer,this.changeOutcome(e)},addLine(e){"h-t"===e&&(this.lineHorizontalTop=!this.lineHorizontalTop),"h-c"===e&&(this.lineHorizontalCenter=!this.lineHorizontalCenter),"h-b"===e&&(this.lineHorizontalBottom=!this.lineHorizontalBottom),"v-l"===e&&(this.lineVerticalLeft=!this.lineVerticalLeft),"v-c"===e&&(this.lineVerticalCenter=!this.lineVerticalCenter),"v-r"===e&&(this.lineVerticalRight=!this.lineVerticalRight),"d-b"===e&&(this.lineDiagonalBack=!this.lineDiagonalBack),"d-f"===e&&(this.lineDiagonalForward=!this.lineDiagonalForward),this.changeVictoryWay(e)},switchShapesInGridContent(){for(let e=0;e<this.gridContent.length;e++)for(let t=0;t<this.gridContent[e].length;t++)this.gridContent[e][t]===this.shapePlayer?this.gridContent[e][t]=this.shapeEnemy:this.gridContent[e][t]===this.shapeEnemy&&(this.gridContent[e][t]=this.shapePlayer)}}},N=()=>{(0,o.sj)((e=>({cabddde6:e.colorCircle,abab6f3a:e.colorCross,"7eb6157a":e.endLineColor})))},J=K.setup;K.setup=J?(e,t)=>(N(),J(e,t)):N;var A=K;const Y=(0,w.Z)(A,[["render",Z],["__scopeId","data-v-21cd71b8"]]);var X=Y;const Q={class:"choices"},ee=["src","onClick","onLoad"],te={class:"endgame"},se=["src"],ne=["src","onLoad"];function ie(e,t,a,r,c,h){const l=(0,n.up)("n-text");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o.uT,{name:"fade"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",Q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.items,((t,o)=>((0,n.wg)(),(0,n.iD)("div",{class:"choice",key:o},[""!==t?((0,n.wg)(),(0,n.iD)("img",{key:0,src:s(968)(`./${t}.svg`),onClick:e=>h.chooseItem(t),class:(0,i.C_)({chosen:e.chosenItem===t,"disabled-item":""!==e.chosenItem}),onLoad:e=>h.loadImgChoices(o)},null,42,ee)):(0,n.kq)("",!0)])))),128))],512),[[o.F8,c.displayChoices&&c.imgChoicesIsLoad]])])),_:1}),(0,n.Wm)(o.uT,{name:"fade-in-down"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",te,[(0,n._)("div",null,[""!==e.chosenItem?((0,n.wg)(),(0,n.iD)("img",{key:0,src:s(968)(`./${e.chosenItem}.svg`),class:(0,i.C_)(c.localOutcome),onLoad:t[0]||(t[0]=e=>c.imgPlayerChosenIsLoad=!0)},null,42,se)):(0,n.kq)("",!0)]),(0,n.Wm)(l,{italic:""},{default:(0,n.w5)((()=>[(0,n.Uk)("VS")])),_:1}),(0,n._)("div",{class:(0,i.C_)({"endgame-enemy-choices":2===e.enemyData.length})},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.enemyData,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.socketId},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.items,((t,i)=>(0,n.wy)(((0,n.wg)(),(0,n.iD)("img",{key:i,src:s(5297)(`./${t}-reverse.svg`),onLoad:e=>h.loadImgEnemyChosen(i)},null,40,ne)),[[o.F8,e.chosenItem===t]]))),128))])))),128))],2)],512),[[o.F8,c.displayEndgame&&c.imgPlayerChosenIsLoad&&c.imgEnemyChosenIsLoad]])])),_:1})])}var oe={name:"RockPaperScissors",mixins:[L,C.Z],data(){return{items:["rock","paper","scissors"],displayChoices:!0,displayEndgame:!1,localOutcome:"",imgChoices:[],imgChoicesIsLoad:!1,imgPlayerChosenIsLoad:!1,imgEnemyChosen:[],imgEnemyChosenIsLoad:!1,transitionTiming:300}},computed:{...(0,u.rn)("player",["username","score"]),...(0,u.rn)("game",["enemyData","chosenItem","scoreToReach"]),...(0,u.Se)("room",["room","enemies"]),enemyEndgameColorClass(){return"victory"===this.localOutcome?"defeat":"defeat"===this.localOutcome?"victory":"equality"}},watch:{enemyData(e){if(0!==e.length){if(""===this.chosenItem){const t=e.filter((e=>""!==e.chosenItem));this.removeMessage(),1===t.length?this.createInfoMessage(`${t[0].username} a choisi son coup`):2===t.length&&this.createInfoMessage(`${t[0].username} et ${t[1].username} ont choisis leurs coups`)}this.checkResult()}}},mounted(){this.listenPlayToRockPaperScissors()},beforeUnmount(){this.resetEnemyData(),this.changeChosenItem(""),this.changeScore(0)},methods:{...(0,u.nv)("player",["changeOutcome","changeScore"]),...(0,u.nv)("game",["emitPlayToRockPaperScissors","listenPlayToRockPaperScissors","changeEnemyData","resetEnemyData","changeChosenItem"]),loadImgChoices(e){this.imgChoices.push(e),this.imgChoices.length<3||(this.imgChoicesIsLoad=!0)},loadImgEnemyChosen(e){this.imgEnemyChosen.push(e),this.imgEnemyChosen.length<this.enemyData.length||(this.imgEnemyChosenIsLoad=!0)},chooseItem(e){""===this.chosenItem&&(this.removeMessage(),this.changeChosenItem(e),this.emitPlayToRockPaperScissors(),this.checkResult())},checkResult(){if(this.enemyData.length<this.room.numberOfPlayer-1||""===this.chosenItem)return;const e=this.enemyData.filter((e=>""!==e.chosenItem));if(e.length!==this.enemyData.length)return;let t=0,s=[],n=[];for(let i=0;i<this.enemyData.length;i++){const e=this.enemyData[i].chosenItem;this.checkVictory(e)&&t++,this.checkDefeat(e)&&(s.push(this.enemyData[i]),t--),this.checkEquality(e)&&n.push(this.enemyData[i])}if(t>0){let e=this.enemyData;n.forEach((t=>{const s=e.findIndex((e=>e.socketId===t.socketId));e[s].score=t.score+1})),this.changeEnemyData(e),this.changeScore(this.score+1)}if(t<0){let e=this.enemyData;s.forEach((t=>{const s=e.findIndex((e=>e.socketId===t.socketId));e[s].score=t.score+1})),this.changeEnemyData(e)}t>0?this.roundOver("victory"):t<0?this.roundOver("defeat"):0===t&&this.roundOver("equality")},checkEquality(e){return"rock"===e&&"rock"===this.chosenItem||"paper"===e&&"paper"===this.chosenItem||"scissors"===e&&"scissors"===this.chosenItem},checkVictory(e){return"rock"===e&&"paper"===this.chosenItem||"paper"===e&&"scissors"===this.chosenItem||"scissors"===e&&"rock"===this.chosenItem},checkDefeat(e){return"rock"===e&&"scissors"===this.chosenItem||"paper"===e&&"rock"===this.chosenItem||"scissors"===e&&"paper"===this.chosenItem},async roundOver(e){this.localOutcome=e,this.displayChoices=!1,await this.sleep(this.transitionTiming),this.displayEndgame=!0,await this.sleep(2e3),this.displayEndgame=!1,this.score!==this.room.scoreToReach&&this.enemyData.find((e=>e.score!==this.room.scoreToReach))&&await this.sleep(this.transitionTiming),this.resetChosenItemForEnemyData(),this.changeChosenItem(""),this.score===this.room.scoreToReach?this.changeOutcome("victory"):this.enemyData.find((e=>e.score===this.room.scoreToReach))?this.changeOutcome("defeat"):this.displayChoices=!0},resetChosenItemForEnemyData(){let e=this.enemyData;for(let t=0;t<e.length;t++)e[t].chosenItem="";this.changeEnemyData(e)}}};const ae=(0,w.Z)(oe,[["render",ie],["__scopeId","data-v-59aa5266"]]);var re=ae,ce=s(4469),he={name:"Room",title:"Room | Playground",mixins:[d.Z],components:{Scorebar:I,HomeUsernameInput:b.Z,Connect4:q,Morpion:X,RockPaperScissors:re,Endgame:T},data(){return{isReady:!1,enemyUsername:""}},computed:{...(0,u.rn)("player",["username","host","outcome","socketId"]),...(0,u.rn)("room",["rooms"]),...(0,u.rn)("game",["game","numberOfPlayer"]),...(0,u.Se)("room",["room","enemies"]),isDisplayScorebar(){return void 0!==this.enemies&&!(this.enemies.length<this.numberOfPlayer-1)}},watch:{room(e){if(void 0===e&&this.isReady)return window.$message.error(`${this.enemyUsername} a quitté la partie`),void this.$router.push({name:"Home"});this.watchRoomForReady()},enemies(e){void 0!==e&&0!==e.length&&""===this.enemyUsername&&(this.enemyUsername=e[0].username)},username(e,t){""!==e&&""===t&&this.joinRoom()}},created(){""!==this.username&&""===this.socketId&&this.joinRoom()},mounted(){this.listenReplay(),this.watchRoomForReady()},async beforeRouteLeave(e,t,s){if(void 0===this.enemies||0===this.enemies.length)return s();const n=await this.quitRoomConfirm();if(!n)return s(!1);s()},beforeUnmount(){this.emitLeaveRoom(),this.resetEnemyData(),this.changeSocketId(""),this.changeGame(""),this.changeRoomId(""),this.changeHost(!1),this.changeIsWinner(!1),this.changeTurn(!1),this.changeOutcome(""),this.changeNumberOfPlayer(2),this.changeScoreToReach(3)},methods:{...(0,u.nv)("player",["changeHost","changeRoomId","changeSocketId","changeTurn","changeIsWinner","changeOutcome"]),...(0,u.nv)("room",["emitCreateOrJoinRoom","emitLeaveRoom","listenReplay"]),...(0,u.nv)("game",["changeGame","resetEnemyData","changeNumberOfPlayer","changeScoreToReach"]),watchRoomForReady(){void 0!==this.room&&this.room.players.length===this.room.numberOfPlayer&&(this.isReady||(this.host||(this.changeScoreToReach(this.room.scoreToReach),this.changeNumberOfPlayer(this.room.numberOfPlayer)),this.isReady=!0))},quitRoomConfirm(){return new Promise((e=>{window.$dialog.warning({title:"Quitter la partie ?",content:"Vous êtes certain de vouloir quitter ? Dans ce cas, votre adversaire sera expulsé de la partie...",positiveText:"Oui, je suis sûr",negativeText:"Finalement non",onPositiveClick:()=>{e(!0)},onNegativeClick:()=>{e(!1)},onMaskClick:()=>{e(!1)},onClose:()=>{e(!1)}})}))},joinRoom(){this.changeSocketId(ce.Z.socket.id),this.changeGame(this.$route.query.game),this.changeRoomId(this.$route.query.id),this.changeHost(!1),this.changeTurn(!1),this.changeIsWinner(!1),this.emitCreateOrJoinRoom()}}};const le=(0,w.Z)(he,[["render",m],["__scopeId","data-v-ef133b58"]]);var me=le},5297:function(e,t,s){var n={"./lizard-reverse.svg":3348,"./paper-reverse.svg":2383,"./rock-reverse.svg":5439,"./scissors-reverse.svg":3991,"./spock-reverse.svg":4600};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=5297},968:function(e,t,s){var n={"./lizard-reverse.svg":3348,"./lizard.svg":8108,"./paper-reverse.svg":2383,"./paper.svg":8848,"./rock-reverse.svg":5439,"./rock.svg":2353,"./scissors-reverse.svg":3991,"./scissors.svg":2096,"./spock-reverse.svg":4600,"./spock.svg":5967};function i(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=968},3348:function(e,t,s){"use strict";e.exports=s.p+"img/lizard-reverse.d87f77be.svg"},8108:function(e,t,s){"use strict";e.exports=s.p+"img/lizard.b5fb9079.svg"},2383:function(e,t,s){"use strict";e.exports=s.p+"img/paper-reverse.8ae0df57.svg"},8848:function(e,t,s){"use strict";e.exports=s.p+"img/paper.acd767a4.svg"},5439:function(e,t,s){"use strict";e.exports=s.p+"img/rock-reverse.5b346b6b.svg"},2353:function(e,t,s){"use strict";e.exports=s.p+"img/rock.ca4c5aec.svg"},3991:function(e,t,s){"use strict";e.exports=s.p+"img/scissors-reverse.4f13ce19.svg"},2096:function(e,t,s){"use strict";e.exports=s.p+"img/scissors.47c9558f.svg"},4600:function(e,t,s){"use strict";e.exports=s.p+"img/spock-reverse.130196c9.svg"},5967:function(e,t,s){"use strict";e.exports=s.p+"img/spock.14f1ed64.svg"}}]);
//# sourceMappingURL=758.ed2cae61.js.map